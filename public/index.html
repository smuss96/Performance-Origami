<!DOCTYPE html>
<html>
<head>
    <title>Performance</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        #startButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <button id="startButton">Avvia la performance</button>
    <script>
        const startButton = document.getElementById("startButton");
        const socket = new WebSocket('wss://www.associazioneorigami.it/performance');

        socket.onopen = function () {
            console.log("Connessione WebSocket aperta");
        };

        socket.onerror = function (error) {
            console.error("Errore WebSocket:", error);
        };

        socket.onmessage = function (event) {
            console.log("Messaggio ricevuto:", event.data);
        };

        startButton.addEventListener("click", async () => {
            try {
                const audio = new Audio("audio/Beat.mp3");
                await audio.play();
                audio.pause();
                console.log("Audio inizializzato");
            } catch (error) {
                console.error("Errore durante l'inizializzazione dell'audio:", error);
            }

            try {
                const video = document.createElement("video");
                video.src = "video/PK.mp4";
                await video.play();
                video.pause();
                console.log("Video inizializzato");
            } catch (error) {
                console.error("Errore durante l'inizializzazione del video:", error);
            }

            // Notifica al server l'inizializzazione completata
            if (socket.readyState === WebSocket.OPEN) {
                socket.send("initializeMedia");
            }
        });
    </script>
</body>
</html>

